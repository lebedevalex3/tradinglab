# Definition of Done (DoD) — TradingLab

Этот документ определяет **критерии завершения этапов (milestones)** проекта TradingLab.

DoD — это не список пожеланий, а **обязательный контракт**:  
этап считается завершённым **только если выполнены все пункты**.

Цель DoD — обеспечить:

- воспроизводимость результатов,
- инженерную дисциплину,
- защиту от самообмана и “иллюзии прогресса”.

---

## Общие правила (для всех milestones)

1. **Milestone нельзя закрыть частично**  
   Все пункты DoD должны быть выполнены.

2. **Каждый milestone завершается артефактами**  
   Код, отчёты, документы — не идеи и не графики.

3. **Отрицательный результат допустим**  
   Некорректный процесс — нет.

4. **Нельзя перескакивать milestones**  
   Следующий этап разрешён только после закрытия текущего.

5. **Изменение логики = изменение версии**  
   Любая правка логики фиксируется документально.

---

## Milestone 0 — Инфраструктура и воспроизводимость

### Цель milestone

Создать воспроизводимый, проверяемый фундамент проекта,
на котором возможен корректный ресёрч и бектестинг.

---

### 1. Репозиторий и структура

- [x] Git-репозиторий инициализирован
- [x] Структура каталогов создана и зафиксирована
- [x] Код, данные, исследования и артефакты разделены
- [x] Принята политика хранения данных и артефактов

---

### 2. Python-окружение

- [x] Используется Python 3.12
- [x] Poetry управляет зависимостями
- [x] Проект устанавливается как Python-пакет (`src` layout)
- [x] `poetry.lock` зафиксирован в репозитории

---

### 3. Качество кода

- [x] Ruff настроен как линтер и форматтер
- [x] Pre-commit hooks установлены и работают
- [x] Локально проходят:
  - `ruff check`
  - `ruff format --check`

---

### 4. Git-политика и ignore

- [x] `.gitignore` настроен
- [x] Реальные данные не коммитятся
- [x] Артефакты прогонов не коммитятся
- [x] Sample data разрешены и используются для тестов
- [x] Секреты и `.env` не попадают в git

---

### 5. Sample data

- [x] В `data/sample/` есть demo-датасет
- [x] Формат данных задокументирован
- [x] Sample data читаются pandas без ошибок
- [x] Sample data используются в smoke-тестах

---

### 6. Конфигурация и окружение

- [x] Создан `.env.example`
- [x] Создан `configs/run.yml`
- [x] Пути и параметры не захардкожены в коде
- [x] Конфиг используется при запуске backtest

---

### 7. Smoke-backtest

- [x] Существует `scripts/run_backtest.py`
- [x] Скрипт запускается через CLI
- [x] Каждый запуск создаёт уникальную run-папку
- [x] Run-папка содержит:
  - `meta.json`
  - `summary.json`
  - `report.md`
  - `trades.parquet`
  - `config.yml`
- [x] Паспорт прогона фиксирует:
  - версию стратегии
  - commit
  - данные
  - параметры
- [x] Создаётся указатель `latest.txt`

---

### 8. Команды проекта

- [x] Есть единый набор команд (Makefile или эквивалент):
  - setup
  - lint
  - test
  - backtest
- [x] Команды работают без ручных правок
- [x] Проект можно запустить на чистой машине

---

### 9. Тесты и CI

- [x] Существует smoke-тест
- [x] Smoke-тест проверяет создание run-папки
- [x] Настроен GitHub Actions CI
- [x] В CI проходят:
  - установка зависимостей
  - lint
  - tests
- [x] CI не зависит от локальных файлов и настроек

---

### 10. Документация

- [x] README.md содержит:
  - цель проекта
  - инструкцию запуска
  - описание результатов
- [x] `docs/runbook.md` описывает:
  - установку окружения
  - запуск backtest
  - расположение результатов
- [x] Этот документ (`definition-of-done.md`) создан и заполнен
- [x] Заметка `TradingLab — Milestones` обновлена

---

## Итог

Milestone 0 считается **завершённым**, если:

- проект воспроизводим с нуля;
- любой запуск оставляет проверяемый след;
- качество кода и окружения контролируется автоматически;
- документация позволяет работать с проектом без устных пояснений.

---

## Запрещено до завершения Milestone 0

- Делать выводы о прибыльности стратегии
- Оптимизировать параметры
- Добавлять сложные индикаторы
- Переходить к Milestone 1

---

**Статус:** ✅ Milestone 0 закрыт  
**Дата закрытия:** 11.01.2026  
**Commit:** milestone: close milestone 0 (infrastructure & reproducibility)
