# Strategy Docs — Index (TradingLab)

Этот раздел (`docs/strategy/`) содержит **каноническую, формальную спецификацию** торговой стратегии TradingLab.

**Правило проекта:**

- Obsidian — место, где ведётся объяснение, рассуждение, примеры и эволюция идей.
- `docs/strategy/` — место, где зафиксированы **однозначные правила**, пригодные для реализации в коде (Pine/Python/Freqtrade).

Если между Obsidian и `/docs` есть расхождения — **истиной для кода является `/docs`**, но изменения должны сначала быть осмыслены в Obsidian и затем перенесены сюда.

---

## Быстрый старт (что читать первым)

1. `strategy-spec.md` — единый документ спецификации стратегии (верхнеуровневая “конституция”).
2. `parameters-v1.md` — таблица параметров v1 (inputs, пороги, режимы).
3. `limitations.md` — ограничения и допущения (когда стратегию не применять).
4. Далее — по блокам: gate → entry → filters → risk → exits.

---

## Файлы и назначение

### 1) Главная спецификация

- `strategy-spec.md`  
  **Назначение:** полный формальный документ стратегии v1: рынок, ТФ, логика блоков, порядок принятия решений, метрики, reason-codes.

---

### 2) Блоки стратегии (декомпозиция)

- `regime-gate.md`  
  **Назначение:** правила определения режима на HTF (MR_OK / MR_NO / UNDEFINED), гистерезис, подтверждение, выходные флаги.

- `entry-logic.md`  
  **Назначение:** условия входа на LTF: взаимодействие с конвертом + Stochastic + подтверждение свечой.

- `filters.md`  
  **Назначение:** фильтры допуска входа (volatility/volume/anti-knife), определения shock/cooldown/reclaim.

- `risk-management.md`  
  **Назначение:** стопы/тейки/тайм-стоп/лимиты; принципы выставления уровней и сопровождения.

- `exit-logic.md`  
  **Назначение:** плановые и аварийные выходы; правила закрытия позиции и reason-codes выходов.

---

### 3) Параметры и эксплуатационные ограничения

- `parameters-v1.md`  
  **Назначение:** единый список параметров v1 (inputs), стартовые значения, допустимые диапазоны, что “фиксируем”, а что “пойдёт в тест” позже.

- `limitations.md`  
  **Назначение:** честные ограничения стратегии и допущения (исполнение, комиссии, проскальзывание, режимы рынка, где стратегия ломается).

---

## Версии и статусы документов

### Статусы

- `draft` — документ ещё уточняется, допускаются изменения.
- `frozen v1` — логика зафиксирована; любые изменения требуют:
  1. записи изменения в Obsidian,
  2. обновления версии стратегии,
  3. последующего изменения этих файлов.

### Версионирование

Версия стратегии хранится в виде строки, например:

- `mr-envelope-v0.1.0`

Любая смена логики сигналов/фильтров/выходов → bump версии (минимум patch/minor по смыслу изменений).

---

## Связь с реализацией (где код)

- PineScript:
  - `pine/modules/` — расчётные модули (без plot)
  - `pine/indicators/` — визуализация и дебаг
  - `pine/strategies/` — торговые правила `strategy()`
- Python:
  - `src/tradinglab/strategy/` — генерация сигналов и логика
  - `src/tradinglab/backtest/` — симуляция исполнения и метрики
- Freqtrade:
  - `freqtrade/` (появится в Milestone 7)

---

## Как вносить изменения в стратегию (процесс)

1. Описать изменение и мотивацию в Obsidian (почему меняем и что ожидаем улучшить).
2. Обновить `/docs/strategy/*.md` (формальные правила).
3. Обновить версию стратегии (strategy_version).
4. Только после этого менять код и запускать тесты/бектесты.

---

## Контакты внутри проекта (навигация)

- Milestones: см. `docs/definition-of-done.md` и Obsidian `TradingLab — Milestones`.
- Общий контур проекта: Obsidian `TradingLab — Project Hub`.
